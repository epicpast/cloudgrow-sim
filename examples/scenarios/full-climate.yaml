# Full Climate Control Scenario
# Commercial greenhouse with complete climate control system
#
# Matches: create_full_climate_scenario() in scenarios.py
# Use case: Testing comprehensive climate management

name: "Full Climate Control"
time_step: 60.0  # seconds
duration: 86400.0  # 24 hours

location:
  latitude: 36.8
  longitude: -119.8
  elevation: 100.0
  timezone: "America/Los_Angeles"

geometry:
  type: gable
  length: 30.0
  width: 10.0
  height_ridge: 5.0
  height_eave: 3.0
  orientation: 0.0

covering:
  material: single_glass

components:
  sensors:
    # Interior combined temp/humidity sensor (DHT-style)
    - type: temp_humidity
      name: dht_int
      location: interior
      temp_noise_std_dev: 0.2
      humidity_noise_std_dev: 2.0

    # Interior PAR sensor
    - type: par
      name: par_int
      location: interior

    # Exterior pyranometer
    - type: solar_radiation
      name: pyranometer
      location: exterior

    # Exterior temperature
    - type: temperature
      name: temp_ext
      location: exterior

  actuators:
    # Staged exhaust fans (3 units)
    - type: exhaust_fan
      name: exhaust_1
      max_flow_rate: 2.0
      power_consumption: 750.0

    - type: exhaust_fan
      name: exhaust_2
      max_flow_rate: 2.0
      power_consumption: 750.0

    - type: exhaust_fan
      name: exhaust_3
      max_flow_rate: 2.0
      power_consumption: 750.0

    # Circulation fan
    - type: circulation_fan
      name: circ_fan
      power_consumption: 200.0

    # Evaporative cooling pad
    - type: evaporative_pad
      name: evap_pad
      pad_area: 6.0
      saturation_efficiency: 0.85

    # Unit heater with controller binding
    - type: unit_heater
      name: heater_1
      controller: heating_control
      heating_capacity: 15000.0
      efficiency: 0.9

    # Roof vents for natural ventilation
    - type: roof_vent
      name: vent_roof_1
      width: 2.0
      height: 0.5
      height_above_floor: 4.5

    - type: roof_vent
      name: vent_roof_2
      width: 2.0
      height: 0.5
      height_above_floor: 4.5

  controllers:
    # Cooling PID controller
    - type: pid
      name: cooling_pid
      process_variable: dht_int.temperature
      setpoint: 26.0
      kp: 0.5
      ki: 0.1
      kd: 0.05
      output_limits: [0.0, 1.0]
      reverse_acting: true

    # Heating hysteresis controller
    - type: hysteresis
      name: heating_control
      process_variable: dht_int.temperature
      setpoint: 18.0
      hysteresis: 2.0
      reverse_acting: false

    # Fan staging controller
    - type: staged
      name: fan_staging
      process_variable: dht_int.temperature
      stages:
        - [26.0, 0.33]
        - [28.0, 0.66]
        - [30.0, 1.0]
      hysteresis: 0.5

  modifiers:
    # Covering material properties
    - type: covering
      name: covering
      material: single_glass

    # Thermal mass (water barrels for heat storage)
    - type: thermal_mass
      name: water_barrels
      mass: 2000.0  # kg (10x 200L barrels)
      specific_heat: 4186.0  # J/(kg*K) for water
      surface_area: 15.0
      initial_temperature: 20.0

weather:
  source: synthetic
  base_temperature: 20.0
  temperature_amplitude: 10.0
